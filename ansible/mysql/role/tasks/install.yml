---
- name: Verify Ubuntu version
  assert:
    that:
      - ansible_distribution == "Ubuntu"
      - ansible_distribution_version is version('22.04', '>=')
    fail_msg: "This playbook requires Ubuntu 22.04 or later"
    success_msg: "OS verification passed: {{ ansible_distribution }} {{ ansible_distribution_version }}"

- name: Update apt cache and install MySQL with dependencies
  apt:
    name:
      - mysql-server
      - python3-pymysql
      - nfs-common
    state: present
    update_cache: yes

- name: Enable and start MySQL service
  systemd:
    name: mysql
    enabled: true
    state: started

- name: Display NFS client installation status
  debug:
    msg: "NFS client (nfs-common) installed for StackBill file storage access"
